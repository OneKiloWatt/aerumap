<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="https://onekilowatt.github.io/aerumap/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#8FBC8F" />
    <meta name="robots" content="index, follow" />

    <title id="page-title">ã‚ãˆã‚‹ã¾ã£ã· | å‹é”ã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ä½ç½®ã‚’å…±æœ‰ã§ãã‚‹åœ°å›³ã‚¢ãƒ—ãƒª</title>

    <meta
      name="description"
      content="ã€Œä»Šã©ã“ï¼Ÿã€ã®ã‚„ã‚Šå–ã‚Šã‚’çœã„ã¦ã€å¾…ã¡åˆã‚ã›ã‚’ã‚‚ã£ã¨ã‚¹ãƒ ãƒ¼ã‚ºã«ã€‚ã‚ãˆã‚‹ã¾ã£ã·ã¯ã€å‹é”ãƒ»å®¶æ—ãƒ»æ‹äººã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ä½ç½®ã‚’å…±æœ‰ã§ãã‚‹ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦ã®Webã‚¢ãƒ—ãƒªã§ã™ã€‚"
      id="page-description"
    />
    <meta
      name="keywords"
      content="ã‚ãˆã‚‹ã¾ã£ã·, ä½ç½®å…±æœ‰, åœ°å›³ã‚¢ãƒ—ãƒª, ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ , å¾…ã¡åˆã‚ã›, GPS, ãƒ–ãƒ©ã‚¦ã‚¶ã‚¢ãƒ—ãƒª"
    />
    <link rel="canonical" href="https://onekilowatt.github.io/aerumap/" id="canonical" />

    <!-- OGPï¼ˆSNSå¯¾å¿œï¼‰ - å‹•çš„ã«æ›´æ–°ã•ã‚Œã‚‹ -->
    <meta property="og:title" content="ã‚ãˆã‚‹ã¾ã£ã·" id="og-title" />
    <meta property="og:description" content="ã€Œä»Šã©ã“ï¼Ÿã€ã®ã‚„ã‚Šå–ã‚Šã‚’çœã‘ã‚‹ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä½ç½®å…±æœ‰ã‚¢ãƒ—ãƒªã€‚" id="og-description" />
    <meta property="og:image" content="https://onekilowatt.github.io/aerumap/ogp.png" id="og-image" />
    <meta property="og:url" content="https://onekilowatt.github.io/aerumap/" id="og-url" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="ã‚ãˆã‚‹ã¾ã£ã·" />



    <link rel="apple-touch-icon" href="https://onekilowatt.github.io/aerumap/logo192.png" />
    <link rel="manifest" href="https://onekilowatt.github.io/aerumap/manifest.json" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <style>
      /* LoadingComponentã¨åŒã˜ã‚¹ã‚¿ã‚¤ãƒ« */
      body {
        margin: 0;
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }

      .loading-container {
        min-height: 100vh;
        background: #F5F2EB;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .loading-image-wrapper {
        margin-bottom: 30px;
      }

      .loading-image {
        width: 120px;
        height: 180px;
        object-fit: contain;
      }

      .loading-title {
        font-size: 24px;
        color: #8B4513;
        margin-bottom: 15px;
        font-weight: bold;
      }

      .loading-message {
        font-size: 16px;
        color: #666;
        text-align: center;
        line-height: 1.6;
        max-width: 300px;
        background: white;
        padding: 20px;
        border-radius: 12px;
        border: 1px solid #ddd;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
    </style>

    <script type="text/javascript">
      // URLã‹ã‚‰ãƒ«ãƒ¼ãƒ IDã‚’å–å¾—
      const urlParams = new URLSearchParams(window.location.search);
      const roomId = urlParams.get('id');
      
      if (roomId) {
        // å‹•çš„ãƒ¡ã‚¿ã‚¿ã‚°ç”Ÿæˆ
        const roomTitle = `ã‚ãˆã‚‹ã¾ã£ã· - ãƒ«ãƒ¼ãƒ  ${roomId}`;
        const roomDescription = `ãƒ«ãƒ¼ãƒ  ${roomId} ã§ä½ç½®ã‚’å…±æœ‰ä¸­ã€‚ä»Šã™ãå‚åŠ ã—ã‚ˆã†ï¼`;
        const roomUrl = `https://onekilowatt.github.io/aerumap/room/${roomId}`;
        
        // å‹•çš„OGPç”»åƒç”Ÿæˆï¼ˆog-image.vercel.appã‚’ä½¿ç”¨ï¼‰
        const dynamicImage = `https://og-image.vercel.app/**ã‚ãˆã‚‹ã¾ã£ã·**%0A%0AğŸ—ºï¸%20ãƒ«ãƒ¼ãƒ %20${encodeURIComponent(roomId)}%0AğŸ“%20ä½ç½®å…±æœ‰ä¸­.png?theme=light&md=1&fontSize=50px`;
        
        // DOMè¦ç´ ãŒå­˜åœ¨ã™ã‚‹å ´åˆã®ã¿æ›´æ–°
        function updateMetaTag(id, attribute, value) {
          const element = document.getElementById(id);
          if (element) {
            if (attribute === 'textContent') {
              element.textContent = value;
            } else {
              element.setAttribute(attribute, value);
            }
          }
        }
        
        // ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜æ›´æ–°
        updateMetaTag('page-title', 'textContent', roomTitle);
        updateMetaTag('page-description', 'content', roomDescription);
        updateMetaTag('canonical', 'href', roomUrl);
        
        // OGPã‚¿ã‚°æ›´æ–°
        updateMetaTag('og-title', 'content', roomTitle);
        updateMetaTag('og-description', 'content', roomDescription);
        updateMetaTag('og-url', 'content', roomUrl);
        updateMetaTag('og-image', 'content', dynamicImage);

        
        // ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼å¾…æ©Ÿå¾Œï¼ˆååˆ†ãªæ™‚é–“ã‚’ç¢ºä¿ï¼‰ã€ç¶ºéº—ãªURLã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
        setTimeout(() => {
          window.location.replace(`/aerumap/room/${roomId}`);
        }, 300); // 300mså¾…æ©Ÿã§OGPã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’ç¢ºå®Ÿã«å¾…ã¤
        
      } else {
        // roomIdãŒãªã„å ´åˆã¯ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸
        setTimeout(() => {
          window.location.replace('/aerumap/');
        }, 100);
      }

      // ãƒ‰ãƒƒãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: . â†’ .. â†’ ... â†’ ç¹°ã‚Šè¿”ã—
      let dotCount = 1;
      function animateDots() {
        const titleElement = document.getElementById('loading-title');
        if (titleElement) {
          const dots = '.'.repeat(dotCount);
          titleElement.textContent = `Now Loading${dots}`;
          dotCount = dotCount >= 3 ? 1 : dotCount + 1;
        }
      }

      // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å¾Œã«ãƒ‰ãƒƒãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
      window.addEventListener('DOMContentLoaded', () => {
        setInterval(animateDots, 500);
      });
    </script>
  </head>

  <body>
    <noscript>JavaScriptã‚’æœ‰åŠ¹ã«ã—ã¦ãã ã•ã„ã€‚</noscript>
    
    <div class="loading-container">
      <!-- ãƒ¡ã‚¤ãƒ³ç”»åƒ -->
      <div class="loading-image-wrapper">
        <img 
          src="https://onekilowatt.github.io/aerumap/images/nowloading.png" 
          alt="èª­ã¿è¾¼ã¿ä¸­" 
          class="loading-image"
        />
      </div>

      <!-- Now Loading... -->
      <h1 class="loading-title" id="loading-title">
        Now Loading.
      </h1>

      <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
      <p class="loading-message">
        ã¡ã‚‡ã£ã¨ã¾ã£ã¦ã¦ã­ã£ï¼ãŠã¸ã‚„ã®ã‹ã–ã‚Šã€ãŒã‚“ã°ã£ã¦ã‚‹ã¨ã“ã‚ã€œğŸ€âœ¨
      </p>
    </div>
  </body>
</html>
